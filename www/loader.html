<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>Loading PAL...</title>
  <style>
    body {
      margin: 0;
      background: #000;
      display: flex;
      align-items: center;
      justify-content: center;
      height: 100vh;
      font-family: system-ui;
      color: #fff;
    }
  </style>
</head>
<body>
  <div>Loading PAL...</div>
  <script type="module">
    // Detect Tauri by trying to use the API
    (async () => {
      console.log('[Loader] Detecting Tauri...');

      try {
        const { invoke } = await import('@tauri-apps/api/core');
        const platform = await invoke('get_platform_info');

        // Store Tauri detection result in localStorage
        localStorage.setItem('__TAURI_DETECTED__', 'true');
        localStorage.setItem('__TAURI_PLATFORM__', JSON.stringify(platform));
        console.log('[Loader] Tauri detected! Platform:', platform);
      } catch (e) {
        console.log('[Loader] Not running in Tauri');
        localStorage.removeItem('__TAURI_DETECTED__');
        localStorage.removeItem('__TAURI_PLATFORM__');
      }

      // Redirect to Railway
      window.location.href = 'https://goldmanai-production.up.railway.app';
    })();
  </script>
</body>
</html>
